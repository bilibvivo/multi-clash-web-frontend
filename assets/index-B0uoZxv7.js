const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./InstanceList-Ti0XT1tE.js","./bootstrap-vendor-BaqZ8axc.js","./react-vendor-BxsFYPlk.js","./ConfigViewer-C_83_C_g.js","./axios-vendor-B9ygI19o.js","./SubscriptionManager-Bg0ISBbx.js","./TrafficMonitor-CurmMmoe.js","./useWebSocket-Ct4q0eJe.js","./chart-vendor-BOne-368.js","./LogViewer-3XC_tiyF.js","./YacdEmbed-BZA1K-B9.js","./MetaCubeXdEmbed-pIW9n64M.js","./ZashboardEmbed-C4ElS5Dg.js"])))=>i.map(i=>d[i]);
import{j as e,T as Y,a as L,B as w,M as j,F as y}from"./bootstrap-vendor-BaqZ8axc.js";import{b as X,r,H as Z,d as J,e as Q,R as ee}from"./react-vendor-BxsFYPlk.js";import{a as te}from"./axios-vendor-B9ygI19o.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var B={},z=X;B.createRoot=z.createRoot,B.hydrateRoot=z.hydrateRoot;const se="modulepreload",ne=function(t,s){return new URL(t,s).href},F={},R=function(s,n,i){let l=Promise.resolve();if(n&&n.length>0){const p=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),v=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));l=Promise.allSettled(n.map(c=>{if(c=ne(c,i),c in F)return;F[c]=!0;const m=c.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(!!i)for(let g=p.length-1;g>=0;g--){const b=p[g];if(b.href===c&&(!m||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":se,m||(x.as="script"),x.crossOrigin="",x.href=c,v&&x.setAttribute("nonce",v),document.head.appendChild(x),m)return new Promise((g,b)=>{x.addEventListener("load",g),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function u(p){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=p,window.dispatchEvent(a),!a.defaultPrevented)throw p}return l.then(p=>{for(const a of p||[])a.status==="rejected"&&u(a.reason);return s().catch(u)})},q=()=>{const t=localStorage.getItem("api_base_url");return t||"http://localhost:8000/api"},re=t=>{if(!(window.location.protocol==="https:"))return{isMixed:!1};try{const n=new URL(t),i=n.protocol==="http:",l=n.hostname==="localhost"||n.hostname==="127.0.0.1";if(i&&!l)return{isMixed:!0,message:"HTTPS 页面无法请求 HTTP 后端（混合内容被阻止）。建议：1) 使用 localhost 地址，2) 配置后端 HTTPS，或 3) 使用相对路径通过前端服务器代理。"}}catch{}return{isMixed:!1}},ae=t=>{let s=t.trim().replace(/\/+$/,"")+"/api";const n=re(s);if(n.isMixed){try{if(new URL(s).hostname===window.location.hostname)return s="/api",localStorage.setItem("api_base_url",s),o.defaults.baseURL=s,{success:!0,warning:"已自动转换为相对路径以避免混合内容问题"}}catch{}return localStorage.setItem("api_base_url",s),o.defaults.baseURL=s,{success:!0,warning:n.message}}return localStorage.setItem("api_base_url",s),o.defaults.baseURL=s,{success:!0}},k=()=>o.defaults.baseURL||q(),_e=()=>{const s=k().replace(/\/api\/?$/,"");return s.startsWith("http://")?s.replace("http://","ws://"):s.startsWith("https://")?s.replace("https://","wss://"):s.startsWith("/")?`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${s}`:`ws://${s}`},Te=()=>{const s=k().replace(/\/api\/?$/,"");try{return s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s.startsWith("/")?window.location.hostname:s.split(":")[0]||"127.0.0.1"}catch{const n=s.match(/(?:https?:\/\/)?([^:\/]+)/);return n?n[1]:"127.0.0.1"}},o=te.create({baseURL:q(),headers:{"Content-Type":"application/json"}}),V={getAll:()=>o.get("/instances"),getById:t=>o.get(`/instances/${t}`),create:t=>o.post("/instances",t),update:(t,s)=>o.put(`/instances/${t}`,s),delete:t=>o.delete(`/instances/${t}`),start:t=>o.post(`/instances/${t}/start`),stop:t=>o.post(`/instances/${t}/stop`),restart:t=>o.post(`/instances/${t}/restart`),updateConfig:t=>o.post(`/instances/${t}/update-config`),getConfig:t=>o.get(`/instances/${t}/config`),getWsInfo:t=>o.get(`/instances/${t}/ws-info`),setSystemProxy:t=>o.post(`/instances/${t}/set-system-proxy`),unsetSystemProxy:t=>o.post(`/instances/${t}/unset-system-proxy`),setAutoStart:(t,s)=>o.post(`/instances/${t}/set-auto-start?auto_start=${s}`)},oe={getAll:()=>o.get("/subscriptions"),create:t=>o.post("/subscriptions",t),update:(t,s)=>o.put(`/subscriptions/${t}`,s),delete:t=>o.delete(`/subscriptions/${t}`),updateContent:t=>o.post(`/subscriptions/${t}/update`),getConfig:t=>o.get(`/subscriptions/${t}/config`),getExtendConfig:t=>o.get(`/subscriptions/${t}/extend-config`),saveExtendConfig:(t,s)=>o.post(`/subscriptions/${t}/extend-config`,{content:s})},Ne={getLogs:(t,s,n)=>o.get(`/logs/${t}`,{params:{lines:s,level:n}})},D={getExtendConfig:()=>o.get("/config/extend"),saveExtendConfig:t=>o.post("/config/extend",{content:t})},W={getVersion:()=>o.get("/clash/version"),getLatestVersion:()=>o.get("/clash/latest-version")},K={getStatus:()=>o.get("/service/status"),install:()=>o.post("/service/install"),uninstall:()=>o.post("/service/uninstall"),start:()=>o.post("/service/start"),stop:()=>o.post("/service/stop")},G=r.createContext(void 0);function M(){const t=r.useContext(G);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function ie({children:t}){const[s,n]=r.useState([]),i=r.useCallback((u,p="info")=>{const a=Date.now();n(v=>[...v,{id:a,message:u,type:p}]),setTimeout(()=>{n(v=>v.filter(c=>c.id!==a))},3e3)},[]),l=r.useCallback(u=>{n(p=>p.filter(a=>a.id!==u))},[]);return e.jsxs(G.Provider,{value:{showToast:i},children:[t,e.jsx(le,{toasts:s,onRemove:l})]})}function le({toasts:t,onRemove:s}){return t.length===0?null:e.jsx("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"500px",width:"90%"},children:t.map(n=>e.jsx(ce,{toast:n,onRemove:s},n.id))})}function ce({toast:t,onRemove:s}){const n=()=>{switch(t.type){case"success":return"success";case"error":return"danger";case"warning":return"warning";default:return"info"}},i=()=>{switch(t.type){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";default:return"ℹ"}};return e.jsxs("div",{className:`alert alert-${n()} alert-dismissible fade show`,role:"alert",style:{margin:0,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",animation:"slideDown 0.3s ease-out"},children:[e.jsx("strong",{children:i()})," ",t.message,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>s(t.id),"aria-label":"Close"}),e.jsx("style",{children:`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}const de=r.lazy(()=>R(()=>import("./InstanceList-Ti0XT1tE.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),ue=r.lazy(()=>R(()=>import("./SubscriptionManager-Bg0ISBbx.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url)),he=r.lazy(()=>R(()=>import("./TrafficMonitor-CurmMmoe.js"),__vite__mapDeps([6,1,2,7,8,4]),import.meta.url)),pe=r.lazy(()=>R(()=>import("./LogViewer-3XC_tiyF.js"),__vite__mapDeps([9,1,2,7,4]),import.meta.url)),me=r.lazy(()=>R(()=>import("./YacdEmbed-BZA1K-B9.js"),__vite__mapDeps([10,1,2,4]),import.meta.url)),xe=r.lazy(()=>R(()=>import("./MetaCubeXdEmbed-pIW9n64M.js"),__vite__mapDeps([11,1,2,4]),import.meta.url)),fe=r.lazy(()=>R(()=>import("./ZashboardEmbed-C4ElS5Dg.js"),__vite__mapDeps([12,1,2,4]),import.meta.url)),I=()=>e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"加载中..."})})});function ge(){const{showToast:t}=M(),[s,n]=r.useState(null),[i,l]=r.useState([]),[u,p]=r.useState(!1),[a,v]=r.useState(!1),[c,m]=r.useState({name:"",subscription_id:null,port:null,mixed_port:null}),[f,N]=r.useState([]),[x,g]=r.useState("instances"),b=async()=>{try{const h=await V.getAll();l(h.data)}catch(h){console.error("Failed to load instances:",h)}};r.useEffect(()=>{b()},[]);const S=async()=>{try{const h=await oe.getAll();N(h.data)}catch(h){console.error("Failed to load subscriptions:",h)}},$=async h=>{var P,U;h.preventDefault(),v(!0);try{await V.create(c),p(!1),m({name:"",subscription_id:null,port:null,mixed_port:null}),t("实例创建成功","success"),b()}catch(d){t(((U=(P=d.response)==null?void 0:P.data)==null?void 0:U.detail)||"创建失败","error")}finally{v(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"panel-body",children:e.jsxs(Y,{activeKey:x,onSelect:h=>h&&g(h),id:"main-tabs",className:"mb-3 modern-tabs",children:[e.jsx(L,{eventKey:"instances",title:"实例列表",children:x==="instances"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"实例列表"}),e.jsx(w,{onClick:()=>{S(),p(!0)},children:"创建新实例"})]}),e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(de,{onRefresh:()=>{b()}})})]})}),e.jsx(L,{eventKey:"subscriptions",title:"订阅管理",children:x==="subscriptions"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(ue,{})})}),e.jsx(L,{eventKey:"traffic",title:"流量监控",children:x==="traffic"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(he,{instances:i,selectedInstanceId:s,onInstanceChange:n})})}),e.jsx(L,{eventKey:"logs",title:"日志查看",children:x==="logs"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(pe,{instances:i,selectedInstanceId:s,onInstanceChange:n})})}),e.jsx(L,{eventKey:"yacd",title:"Yacd 控制台",children:x==="yacd"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(me,{instances:i,selectedInstanceId:s,onInstanceChange:n})})}),e.jsx(L,{eventKey:"metacubexd",title:"metacubexd 控制台",children:x==="metacubexd"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(xe,{instances:i,selectedInstanceId:s,onInstanceChange:n})})}),e.jsx(L,{eventKey:"zashboard",title:"Zashboard 控制台",children:x==="zashboard"&&e.jsx(r.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(fe,{instances:i,selectedInstanceId:s,onInstanceChange:n})})})]})}),e.jsxs(j,{show:u,onHide:()=>!a&&p(!1),children:[e.jsx(j.Header,{closeButton:!a,children:e.jsx(j.Title,{children:"创建新实例"})}),e.jsxs(y,{onSubmit:$,children:[e.jsxs(j.Body,{children:[e.jsxs(y.Group,{className:"mb-3",children:[e.jsx(y.Label,{children:"实例名称"}),e.jsx(y.Control,{type:"text",value:c.name,onChange:h=>m({...c,name:h.target.value}),required:!0,disabled:a})]}),e.jsxs(y.Group,{className:"mb-3",children:[e.jsx(y.Label,{children:"订阅"}),e.jsxs(y.Select,{value:c.subscription_id||"",onChange:h=>m({...c,subscription_id:h.target.value?parseInt(h.target.value):null}),required:!0,disabled:a,children:[e.jsx("option",{value:"",children:"选择订阅"}),f.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs(y.Group,{className:"mb-3",children:[e.jsx(y.Label,{children:"管理端口（可选，自动分配）"}),e.jsx(y.Control,{type:"number",value:c.port||"",onChange:h=>m({...c,port:h.target.value?parseInt(h.target.value):null}),disabled:a})]}),e.jsxs(y.Group,{className:"mb-3",children:[e.jsx(y.Label,{children:"混合端口（可选，自动分配）"}),e.jsx(y.Control,{type:"number",value:c.mixed_port||"",onChange:h=>m({...c,mixed_port:h.target.value?parseInt(h.target.value):null}),disabled:a})]})]}),e.jsxs(j.Footer,{children:[e.jsx(w,{variant:"secondary",onClick:()=>p(!1),disabled:a,children:"取消"}),e.jsx(w,{variant:"primary",type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"创建中..."]}):"创建"})]})]})]})]})}function je({show:t,onHide:s,title:n}){const{showToast:i}=M(),[l,u]=r.useState(""),[p,a]=r.useState(!1),[v,c]=r.useState(!1),[m,f]=r.useState(null);r.useEffect(()=>{t&&N()},[t]);const N=async()=>{var g,b;a(!0),f(null);try{const S=await D.getExtendConfig();u(S.data.content||"")}catch(S){f(((b=(g=S.response)==null?void 0:g.data)==null?void 0:b.detail)||"加载配置文件失败"),u("")}finally{a(!1)}},x=async()=>{var g,b;c(!0),f(null);try{await D.saveExtendConfig(l),s(),i("配置文件保存成功","success")}catch(S){const $=((b=(g=S.response)==null?void 0:g.data)==null?void 0:b.detail)||"保存配置文件失败";f($),i($,"error")}finally{c(!1)}};return e.jsxs(j,{show:t,onHide:s,size:"lg",fullscreen:"lg-down",children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:n})}),e.jsxs(j.Body,{style:{padding:0},children:[m&&e.jsx("div",{className:"alert alert-danger m-3 mb-0",role:"alert",children:m}),p?e.jsx("div",{className:"p-5 text-center",children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"加载中..."})})}):e.jsx("textarea",{value:l,onChange:g=>u(g.target.value),style:{width:"100%",height:"70vh",padding:"15px",fontFamily:'Consolas, Monaco, "Courier New", monospace',fontSize:"13px",lineHeight:"1.5",border:"none",outline:"none",backgroundColor:"#1e1e1e",color:"#d4d4d4",resize:"none",whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto"},spellCheck:!1})]}),e.jsxs(j.Footer,{children:[e.jsx(w,{variant:"secondary",onClick:s,disabled:v,children:"取消"}),e.jsx(w,{variant:"primary",onClick:x,disabled:p||v,children:v?"保存中...":"保存"})]})]})}function ve(){const{showToast:t}=M(),[s,n]=r.useState(!1),[i,l]=r.useState(null),[u,p]=r.useState(!1),a=async()=>{var c,m;try{const f=await K.getStatus();l(f.data)}catch(f){((c=f.response)==null?void 0:c.status)===404||((m=f.response)==null?void 0:m.status)===400?l({installed:!1,running:!1,service_name:"ClashMultiInstanceManager"}):console.error("获取服务状态失败:",f)}};r.useEffect(()=>{s&&a()},[s]);const v=async()=>{var c,m;p(!0);try{await K.install(),t("服务注册成功","success"),await a()}catch(f){t(((m=(c=f.response)==null?void 0:c.data)==null?void 0:m.detail)||"服务注册失败","error")}finally{p(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline-light",size:"sm",onClick:()=>n(!0),className:"ghost-button me-2",children:"Windows 服务控制"}),e.jsxs(j,{show:s,onHide:()=>n(!1),children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Windows 服务控制"})}),e.jsx(j.Body,{children:i?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"服务名称:"})," ",i.service_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"安装状态:"})," ",i.installed?"已安装":"未安装"]}),i.installed&&e.jsxs("p",{children:[e.jsx("strong",{children:"运行状态:"})," ",i.running?"运行中":"已停止"]}),e.jsx("div",{className:"mt-3",children:i.installed?null:e.jsx(w,{variant:"primary",onClick:v,disabled:u,className:"me-2",children:u?"注册中...":"注册服务"})}),e.jsx("div",{className:"mt-3 text-muted small",children:e.jsx("p",{children:"提示：注册/卸载服务需要管理员权限"})})]}):e.jsx("p",{children:"读取中..."})}),e.jsx(j.Footer,{children:e.jsx(w,{variant:"secondary",onClick:()=>n(!1),children:"关闭"})})]})]})}function be(){const{showToast:t}=M(),[s,n]=r.useState(!1),[i,l]=r.useState(""),[u,p]=r.useState(""),[a,v]=r.useState(!1),[c,m]=r.useState(!1),[f,N]=r.useState(k()),[x,g]=r.useState("");r.useEffect(()=>{N(k()),b()},[]);const b=()=>{W.getVersion().then(d=>{d.data.version&&d.data.version!=="unknown"&&d.data.version!=="not_found"&&d.data.version!=="error"&&(l(d.data.version),p(d.data.full_output||""))}).catch(d=>{console.error("获取 Clash 版本失败:",d)})},S=()=>{try{const d=x.trim();if(!d){t("请输入后端地址","warning");return}let _=d;!d.startsWith("http://")&&!d.startsWith("https://")&&(_=`http://${d}`);try{new URL(_)}catch{t("无效的 URL 格式","error");return}if(window.location.protocol==="https:"&&_.startsWith("http://"))try{const E=new URL(_);if(!(E.hostname==="localhost"||E.hostname==="127.0.0.1")&&!window.confirm(`检测到混合内容问题：HTTPS 页面无法请求 HTTP 后端。

解决方案：
1. 使用 localhost 地址（浏览器允许）
2. 配置后端 HTTPS
3. 使用相对路径通过前端服务器代理

是否仍要保存此地址？（可能无法正常工作）`))return}catch{}const C=ae(_);N(k()),C.warning?t(C.warning,"warning"):t("后端地址已更新","success"),m(!1),g(""),setTimeout(()=>{b()},500)}catch(d){t("保存失败: "+(d.message||"未知错误"),"error")}},$=()=>{g("http://localhost:8000")},h=()=>{const d=f.replace(/\/api\/?$/,"");g(d),m(!0)},P=(d,_)=>{const T=d.replace(/^v/i,"").split(".").map(Number),C=_.replace(/^v/i,"").split(".").map(Number),E=Math.max(T.length,C.length);for(let A=0;A<E;A++){const H=T[A]||0,O=C[A]||0;if(H>O)return 1;if(H<O)return-1}return 0},U=async()=>{var d,_;if(!i){t("请先获取当前版本信息","warning");return}v(!0);try{const C=(await W.getLatestVersion()).data.latest_version.trim();if(!C)throw new Error("无法获取版本号");const E=P(C,i);E>0?t(`发现新版本: ${C}`,"info"):E<0?t(`当前版本 ${i} 新于最新发布版`,"success"):t("已经是最新版本","success")}catch(T){console.error("检查更新失败:",T);const C=((_=(d=T.response)==null?void 0:d.data)==null?void 0:_.detail)||T.message||"检查失败";t("检查更新失败: "+C,"error")}finally{v(!1)}};return e.jsx(Z,{children:e.jsx("div",{className:"app-shell",children:e.jsxs("div",{className:"app-container container-xxl py-4",children:[e.jsxs("div",{className:"app-hero mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"brand-mark",children:"CM"}),e.jsxs("div",{children:[e.jsx("p",{className:"eyebrow",children:"Clash Multi-Instance"}),e.jsx("h1",{className:"hero-title",children:"Clash多实例管理后台"}),e.jsx("p",{className:"hero-subtitle",children:"现代化的轻量控制台，集中管理订阅、实例、流量与系统代理。"})]})]}),e.jsxs("div",{className:"d-flex flex-column align-items-start align-items-lg-end gap-2 ms-lg-auto",children:[i?e.jsxs("div",{className:"version-chip",title:u,children:[e.jsxs("div",{className:"version-chip__label",children:["Clash v",i]}),e.jsx(w,{variant:"outline-light",size:"sm",onClick:U,disabled:a,className:"ghost-button ghost-button--compact",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"检查中..."]}):"检查更新"})]}):e.jsx("div",{className:"version-chip",children:e.jsx("div",{className:"version-chip__label",children:"版本信息读取中..."})}),e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-muted small",style:{fontSize:"0.85rem"},children:"后端:"}),e.jsx(w,{variant:"outline-light",size:"sm",onClick:h,className:"ghost-button ghost-button--compact",title:"点击切换后端地址",children:f.replace(/\/api\/?$/,"")})]}),e.jsxs("div",{className:"hero-actions",children:[e.jsx(ve,{}),e.jsx(w,{variant:"light",size:"sm",onClick:()=>n(!0),className:"accent-button",children:"全局扩展配置"})]})]})]}),e.jsx("div",{className:"panel-card mt-4",children:e.jsx(J,{children:e.jsx(Q,{path:"/",element:e.jsx(ge,{})})})}),e.jsx(je,{show:s,onHide:()=>n(!1),title:"全局扩展配置"}),e.jsxs(j,{show:c,onHide:()=>m(!1),children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"配置后端地址"})}),e.jsxs(j.Body,{children:[window.location.protocol==="https:"&&e.jsxs("div",{className:"alert alert-warning mb-3",role:"alert",children:[e.jsx("strong",{children:"HTTPS 页面提示："}),e.jsxs("ul",{className:"mb-0 mt-2",children:[e.jsxs("li",{children:["使用 ",e.jsx("code",{children:"localhost"})," 或 ",e.jsx("code",{children:"127.0.0.1"})," 地址（浏览器允许）"]}),e.jsx("li",{children:"局域网 HTTP 地址可能被浏览器阻止（混合内容）"}),e.jsx("li",{children:"建议配置后端 HTTPS 或使用相对路径代理"})]})]}),e.jsxs(y.Group,{className:"mb-3",children:[e.jsx(y.Label,{children:"后端 API 地址"}),e.jsx(y.Control,{type:"text",placeholder:"例如: http://localhost:8000 或 http://192.168.1.100:8000",value:x,onChange:d=>g(d.target.value),onKeyPress:d=>{d.key==="Enter"&&S()}}),e.jsxs(y.Text,{className:"text-muted",children:["当前地址: ",f.replace(/\/api\/?$/,"")]})]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(w,{variant:"outline-secondary",size:"sm",onClick:$,children:"重置为默认"})})]}),e.jsxs(j.Footer,{children:[e.jsx(w,{variant:"secondary",onClick:()=>m(!1),children:"取消"}),e.jsx(w,{variant:"primary",onClick:S,children:"保存"})]})]})]})})})}function ye(){return e.jsx(ie,{children:e.jsx(be,{})})}B.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(ye,{})}));export{Te as a,_e as g,V as i,Ne as l,oe as s,M as u};
